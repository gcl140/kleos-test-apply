{% extends 'applications/shared_form_base.html' %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}
{% load static %}

{% block title %}Sibling Information{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/siblings.css' %}">
{% endblock %}

{% block content %}
<div class="content-wrapper" >
    <!-- <div class="form-progress"> -->
            <div class="form-progress">
                <a href="{% url 'intro_view' %}" class="progress-step {% if progress_data.intro.completed %}completed{% endif %} {% if current_section == 'intro' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">Intro</span>
                </a>
                <a href="{% url 'general_info_view' %}" class="progress-step {% if progress_data.general_info.completed %}completed{% endif %} {% if current_section == 'general_info' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">General Info</span>
                </a>
                <a href="{% url 'contact_info_view' %}" class="progress-step {% if progress_data.contact_info.completed %}completed{% endif %} {% if current_section == 'contact_info' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">Contact Info</span>
                </a>
                <a href="{% url 'school_info_view' %}" class="progress-step {% if progress_data.school_info.completed %}completed{% endif %} {% if current_section == 'school_info' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">School Info</span>
                </a>
                <a href="{% url 'parent_info_view' %}" class="progress-step {% if progress_data.family_info.completed %}completed{% endif %} {% if current_section == 'family_info' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">Family Info</span>
                </a>
                <a href="{% url 'addsiblings' %}" class="progress-step {% if progress_data.siblings.completed %}completed{% endif %} {% if current_section == 'siblings' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label" style="color: black;">Siblings</span>
                </a>
                <a href="{% url 'adddependents' %}" class="progress-step {% if progress_data.dependents.completed %}completed{% endif %} {% if current_section == 'dependents' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">Dependents</span>
                </a>
                <a href="{% url 'financial_info_view' %}" class="progress-step {% if progress_data.financial_info.completed %}completed{% endif %} {% if current_section == 'financial_info' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">Financial Info</span>
                </a>
                <a href="{% url 'addactivities' %}" class="progress-step {% if progress_data.activities.completed %}completed{% endif %} {% if current_section == 'activities' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">Activities</span>
                </a>
                <a href="{% url 'adddistinctions' %}" class="progress-step {% if progress_data.distinctions.completed %}completed{% endif %} {% if current_section == 'distinctions' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">Distinctions</span>
                </a>
                <a href="{% url 'additional_info_view' %}" class="progress-step {% if progress_data.other_inquiries.completed %}completed{% endif %} {% if current_section == 'other_inquiries' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">Other Inquiries</span>
                </a>
                <a href="{% url 'writing_section_view' %}" class="progress-step {% if progress_data.writing.completed %}completed{% endif %} {% if current_section == 'writing' %}active{% endif %}">
                    <span class="step-dot"></span>
                    <span class="step-label">Writing</span>
                </a>
        </div>
    <!-- </div> -->

    <div class="form-section" style="margin: auto !important;">
        <div class="form-container">
            <!-- Sibling Form Section -->
            <div id="sibling-form" class="siblings-container">
                <h2 class="text-center text-secondary my-4" style="margin: auto; color: white;">
                    Siblings Information
                    </h2>
                    <br>
    
                <div class="form-row" style="color: wheat;">
                    <!-- Sibling Name -->
                    <div class="input-group">
                        Siblings information. Give names, birth years, educational level reached (please specify all post-secondary
                        institutions if attended, and degree(s) earned) and occupation.
                    </div>
                </div>
                
                {% include 'partials/siblings.html' %}
                
            </div>


            <!-- Action Buttons Section -->
            <div class="sibling-actions">
                <button type="button" class="btn-add-sibling"
                    hx-get="{% url 'create_sibling' %}" 
                    hx-target="#sibling-form" 
                    hx-swap="beforeend">
                    <i class="fas fa-plus-circle"></i> Add Sibling
                </button>
                <button class="btn-submit-all" type="button" id="submit-all">
                    <i class="fas fa-check-circle"></i> Save All
                </button>
            </div>

            <!-- Navigation Buttons -->
            <div class="button-group">
                <a href="{{ previous_url }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back
                </a>
                <a href="{{ next_url }}" class="btn btn-primary">
                    Continue <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>

        <div class="siblings-list-container">
            <h3 class="section-title">
                <i class="fas fa-users"></i>
                Added Siblings
            </h3>
            <div id="sibling-list" class="siblings-grid">
                {% for sibling in siblings %}
                    {% include 'partials/siblings_list.html' %}
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/siblings.js' %}"></script>
{% endblock %}