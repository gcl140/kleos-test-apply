{% extends 'applications/shared_form_base.html' %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}
{% load static %}

{% block title %}activity Information{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/activities.css' %}">
{% endblock %}

{% block content %}
<div class="content-wrapper">
    <!-- <div class="form-progress"> -->
        <div class="form-progress">
            <a href="{% url 'intro_view' %}" class="progress-step {% if application.intro_completed %}completed{% endif %} {% if current_section == 'intro' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.intro_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Intro</span>
            </a>
            <a href="{% url 'general_info_view' %}" class="progress-step {% if application.general_info_completed %}completed{% endif %} {% if current_section == 'general_info' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.general_info_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">About You</span>
            </a>
            <a href="{% url 'contact_info_view' %}" class="progress-step {% if application.contact_info_completed %}completed{% endif %} {% if current_section == 'contact_info' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.contact_info_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Contacts</span>
            </a>
            <a href="{% url 'school_info_view' %}" class="progress-step {% if application.school_info_completed %}completed{% endif %} {% if current_section == 'school_info' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.school_info_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">School Info</span>
            </a>
            <a href="{% url 'parent_info_view' %}" class="progress-step {% if application.family_info_completed %}completed{% endif %} {% if current_section == 'family_info' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.family_info_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Family Info</span>
            </a>
            <a href="{% url 'addsiblings' %}" class="progress-step {% if application.siblings_completed %}completed{% endif %} {% if current_section == 'siblings' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.siblings_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Siblings</span>
            </a>
            <a href="{% url 'adddependents' %}" class="progress-step {% if application.dependents_completed %}completed{% endif %} {% if current_section == 'dependents' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.dependents_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Dependents</span>
            </a>
            <a href="{% url 'financial_info_view' %}" class="progress-step {% if application.financial_info_completed %}completed{% endif %} {% if current_section == 'financial_info' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.financial_info_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Financial Info</span>
            </a>
            <a href="{% url 'addactivities' %}" class="progress-step {% if application.activities_completed %}completed{% endif %} {% if current_section == 'activities' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.activities_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Activities</span>
            </a>
            <a href="{% url 'adddistinctions' %}" class="progress-step {% if application.distinctions_completed %}completed{% endif %} {% if current_section == 'distinctions' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.distinctions_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Distinctions</span>
            </a>
            <a href="{% url 'additional_info_view' %}" class="progress-step {% if application.other_inquiries_completed %}completed{% endif %} {% if current_section == 'other_inquiries' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.other_inquiries_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Other Inquiries</span>
            </a>
            <a href="{% url 'writing_section_view' %}" class="progress-step {% if application.writing_completed %}completed{% endif %} {% if current_section == 'writing' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.writing_completed %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Writing</span>
            </a>
            <a href="{% url 'files_signature' %}" class="progress-step {% if application.files_signature %}completed{% endif %} {% if current_section == 'files_signature' %}active{% endif %}">
                <span class="step-dot">
                    {% if application.files_signature %}
                        <i class="fa-regular fa-circle-check"></i>
                    {% else %}
                        <i class="fa-regular fa-circle"></i>
                    {% endif %}
                </span>
                <span class="step-label">Uploads</span>
            </a>
        </div>
    <!-- </div> -->

    <div class="form-section" style="margin: auto !important;">
        <div class="form-container">
            <!-- activity Form Section -->
            <div id="activity-form" class="activities-container">
                <h2 class="text-center text-secondary my-4" style="margin: auto; color: white;">
                    Activities
                    </h2>
                    <br>
                <div class="form-row" style="color: wheat;">
                    <!-- Sibling Name -->
                    <div class="required" style="color: rgb(255, 126, 126);">
                        <b>
                            Please fill in a maximum of 10 activities!!
                        </b>
                    </div>
                    <br>

                    <div class="input-group">
                        List each of your extracurricular activities IN AND OUT OF SCHOOL, giving leadership positions and awards/
                        distinctions
                        achieved, if any. (Be specific. For example, if sports, specify which sport, position, competitive
                        level
                        reached, if any, etc.) Please estimate the number of hours you spent per week on each activity, and
                        the
                        years in which you engaged in the activity (e.g. Forms 3 and 4) 


                    </div>

                </div>
                {% include 'partials/activities.html' %}
            </div>


            <!-- Action Buttons Section -->
            <div class="instr" style="color: wheat;">
                Please remember to click the <b> SAVE ALL</b> button after adding activities.
            </div>
            <div class="activity-actions">
                <button type="button" class="btn-add-activity" hx-get="{% url 'create_activity' %}"
                    hx-target="#activity-form" hx-swap="beforeend">
                    <i class="fas fa-plus-circle"></i> Add activity
                </button>
                <button class="btn-submit-all" type="button" id="submit-all">
                    <i class="fas fa-check-circle"></i> Save All
                </button>
            </div>

            <!-- Navigation Buttons -->
            <div class="button-group">
                <a href="{{ previous_url }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back
                </a>
                <a href="{{ next_url }}" class="btn btn-primary">
                    Save & Continue <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>

        <div class="activities-list-container">
            <h3 class="section-title">
                <i class="fas fa-users"></i>
                Added activities
            </h3>
            <div id="activity-list" class="activities-grid">
                {% for activity in activities %}
                {% include 'partials/activities_list.html' %}
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/activities.js' %}"></script>
{% endblock %}